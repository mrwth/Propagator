
\documentclass[a4paper]{amsart}
\usepackage[utf8]{inputenc}
\usepackage{tikz,eucal,hyperref}
\usetikzlibrary{matrix,arrows,shapes,calc,intersections,decorations.markings,decorations.pathmorphing}

\usepackage{tikz-cd}
\usepackage{tkz-euclide}
\usepackage{amssymb,mathtools}
%\usepackage{lmodern}
%\usepackage[T1]{fontenc}

\tikzset{->-/.style={decoration={
  markings,
  mark=at position #1 with {\arrow{stealth'}}},postaction={decorate}}}
  
\tikzset{proj/.style={circle,draw=black, fill=white,inner sep=0pt}}
\tikzset{anch/.style={circle,fill=black,draw=black,inner sep=0pt,minimum size=1mm}}
\tikzset{pnt/.style={circle,fill=black,draw=white,inner sep=1pt}}

\theoremstyle{plain}
  \newtheorem{thm}{Theorem}[section]
  \newtheorem{defn}[thm]{Definition}
  \newtheorem{thd}[thm]{Theorem/Definition}
  \newtheorem*{defn*}{Definition}
  \newtheorem{prop}[thm]{Proposition}
  \newtheorem{cor}[thm]{Corollary}
  \newtheorem{lem}[thm]{Lemma}
\theoremstyle{definition}
  \newtheorem{example}[thm]{Example}
  \newtheorem*{rem}{Remark}

\newcommand{\mbb}{\mathbb}
\newcommand{\mf}{\mathfrak}
\newcommand{\mc}{\mathcal}
\newcommand{\ms}{\mathsf}
\newcommand{\on}{\operatorname}
%\newcommand{\ann}{\on{ann}}
\newcommand{\g}{\mathfrak{g}}
%\newcommand{\dd}{\mathfrak{d}}
\newcommand{\h}{\mathfrak{h}}
\newcommand{\bw}{{\textstyle\bigwedge}}




\newcommand{\la}{\langle}
\newcommand{\ra}{\rangle}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\CP}{\mathbb{CP}^1}
\newcommand{\half}{\frac{1}{2}}
\newcommand{\id}{\on{id}}
\newcommand{\cf}{\mathsf{Conf}}


\newcommand{\todo}{\textbf{TODO}}



\title{Generalized Ricci tensor and the boundary of Chern-Simons theory}


\begin{document}

\maketitle

\section{Chern-Simons propagator with the chiral boundary condition}

In this section we shall construct a propagator for the Chern-Simons theory on the unit closed ball $B^3$, with the chiral boundary condition familiar from the CS/WZW correspondence \cite{W}.

The (naive) space of fields of the CS theory is $\Omega^1(B^3)\otimes\g$. The Lie algebra $\g$ will play a very little role in the propagator, so for the moment we shall suppose that the space of fields is $\Omega^1(B^3)$ (i.e.\ that $\g=\R$) and restore an arbitrary $\g$ only at the  end of this section.

\subsection{Chiral boundary condition}
The chiral boundary condition demands that the fields, when restricted to $\partial B^3 = S^2$, are in $\Omega^{1,0}(S^2)\subset\Omega^1(S^2)$ (using the standard complex structure on $S^2=\CP$). 

Let us rephrase this boundary condition in the BV formalism, including ghosts and antifields. Let 
$$\Omega_b(B^3)\subset\Omega(B^3)$$
be the subcomplex of the forms whose restriction to $S^2$ is in
$$\Omega_{(+)}(S^2):=\Omega^{1,0}(S^2)\oplus\Omega^2(S^2)\subset\Omega(S^2).$$
Let us observe that $\Omega_b(B^3)$ is acyclic.
Then our BV space of fields is
$$\Omega_b(B^3)[1].$$
% Notice that our boundary condition kills the gauge symmetry on the boundary; this corresponds to the fact that the ghosts, i.e. the 0-forms in $\Omega_b(B^3)[1]$, vanish on the boundary.

% In the BV formalism, which we will be using throughout the paper, our space of fields, including ghosts and antifields, is then the  subcomplex
% $$\Omega_b(B^3)\subset\Omega(B^3)$$
% of the forms on $B^3$ whose restriction to $\Omega(S^2)$ is in the  subcomplex
% $$\Omega_{(+)}(S^2):=\Omega^{1,0}(S^2)\oplus\Omega^2(S^2)\subset\Omega(S^2).$$
% Let us observe that $\Omega_b(B^3)$ is acyclic.

For future reference, let 
$$\Omega_{\bar b}(B^3)\subset\Omega(B^3)$$
be the subbcomplex given by the boundary condition
$$\Omega_{(-)}(S^2):=\Omega^{0,1}(S^2)\oplus\Omega^2(S^2)\subset\Omega(S^2).$$


\subsection{Propagator}
The propagator we are looking for should be a degree $-1$ map 
$$h:\Omega_b(B^3)\to\Omega_b(B^3)$$
such that
$$d\,h+h\,d=\id.$$
Moreover, $h$ should be given by an integral kernel 
$$P_0\in\Omega^2(\cf_2(B^3)),$$
where
$$\cf_2(B^3):=B^3\times B^3\setminus\text{diagonal},$$
and $P_0$ should only have a mild singularity at the diagonal of $B^3\times B^3$ (see \cite{AS, K}).

Let us describe a suitable $P_0$ explicitly, using the natural $SL(2,\C)$-invariant holomorphic closed 2-form
\begin{equation}\label{omega}
\omega =\frac{dz_1\wedge dz_2}{(z_1-z_2)^2}\quad\in\ \Omega^2(\cf_2(\CP)). 
\end{equation}


Given any 2 points 
$$q_1\neq q_2\in B^3$$ let $\gamma$ be the hyperbolic geodesics passing through $q_1$ and $q_2$, where we see $B^3$ as the Poincar√© model of the hyperbolic space. Let 
$$z_1,z_2\in\CP=S^2$$
be the points where $\gamma$ intersects $S^2$, $z_1$ on the side of $q_1$ and $z_2$ on the side of $q_2$. 
$$
\begin{tikzpicture}[scale=1.5]
  \tkzDefPoint(0,0){O}
  \tkzDefPoint(1,0){A}
  \tkzDrawCircle(O,A)  
  \tkzDefPoint(.3,-.5){q1}
  \tkzDefPoint(.7,0.1){q2}
  \begin{scope}
    \tkzClipCircle(O,A)
    \tkzDefCircle[orthogonal through=q1 and q2](O,A) \tkzGetPoint{B}
    \tkzInterCC(O,A)(B,q1) \tkzGetPoints{C}{D}  
    \tkzDrawCircle[color=red, orthogonal through=q1 and q2](O,A)%
  \end{scope}
  \tkzDrawPoints[size=4](q1,q2,C,D) 
  \tkzLabelPoint[left](q1){$q_1$}
  \tkzLabelPoint[above](q2){$q_2$}
  \tkzLabelPoint[below](D){$z_1$}
  \tkzLabelPoint[right](C){$z_2$}
\end{tikzpicture}
$$
We thus obtain a projection
$$p:\cf_2(B^3)\to \cf_2(\CP),\quad p(q_1,q_2):=(z_1,z_2).$$
Finally we set 
\begin{equation}
P_0:=p^*\omega/2\pi i.
\end{equation}


One can easily see that $P_0$ has the required properties. In particular, if we fix one of the two points in $B^3$ to be in the center, $P_0$ becomes  the (normalized) area form on $S^2$ pulled back to $B^3\setminus\{\text{center}\}$ along the radii. By construction, $P_0$ is $SL(2,\C)$-invariant, where $SL(2,\C)$ acts on $B^3$ via the hyperbolic isometries.

\begin{rem}
In the usual setup of BV quantization one needs to choose a Lagrangian submanifold in the space of fields and restrict the path integral to this submanifold. The corresponding homotopy $h$ then satisfies $h^2=0$. We do not verify this relation for our $h$; as explained to \cite{CM}, it is not necessary.
\end{rem}

\subsection{The case of a non-trivial $\g$}
For a general Lie algebra $\g$ with an invariant inner product, when the space of Chern-Simons fields with the chiral boundary condition is $\Omega_b(B^3)[1]\otimes\g$, the propagator is simply
$$P=P_0\otimes t\in \Omega^2\bigl(\cf_2(B^3),\g\otimes\g\bigr)$$
where $t\in\g\otimes\g$ is the (inverse of) the inner product on $\g$. 
%We will not use this propagator in what follows, i.e.\ we will not study the CS/WZW correspondence perturbatively, but we will use its certain straightforward modification.
\subsection{Generalized metrics}\label{sec:gm}
Let us suppose that the Lie algebra $\g$ is split to an orthogonal sum
$$\g=V_+\oplus V_-,\quad V_-=V_+^\perp$$
of vector subspaces, with $\la,\ra|_{V_+}$ positive-definite and $\la,\ra|_{V_-}$ negative-definite. Such a splitting is called a \emph{generalized metric} on $\g$. We can use it to get  a minor generalization of the chiral boundary condition, which we shall call the \emph{$V_+$-boundary condition}: it is given by the subcomplex
$$\bigl(\Omega_{(+)}(S^2)\otimes V_+\bigr) \oplus \bigl(\Omega_{(-)}(S^2)\otimes V_-\bigr) \subset\Omega(S^2)\otimes\g,$$
i.e.\ the  space of fields with this boundary condition is
$$\bigl(\Omega_{b}(B^3)[1]\otimes V_+\bigr) \oplus \bigl(\Omega_{\bar b}(B^3)[1]\otimes V_-\bigr)\subset \Omega(B^3)[1]\otimes\g.
$$

The propagator is
\begin{equation}\label{gmprop}
P=P_0\otimes t_+ + \bar P_0\otimes t_-\in \Omega^2\bigl(\cf_2(B^3),\g\otimes\g\bigr)
\end{equation}
where $t_+\in V_+\otimes V_+$ and $t_-\in V_-\otimes V_-$ is the (inverse of) the inner product on $V_+$ and on $V_-$ respectively.

We shall study the $V_+$-boundary condition perturbatively in \S\ref{sec:diag}, where we shall find, in particular, the 1-loop renormalization group flow of $V_+$. The motivation is described in \S\ref{sec:PL}, given by the relation with 2-dim $\sigma$-models and with Poisson-Lie T-duality.


\section{2d $\sigma$-models on the boundary of Chern-Simons and Poisson-Lie T-duality}\label{sec:PL}

In this section we shall explain the link between the Chern-Simons theory with the $V_+$-boundary condition, 2-dim $\sigma$-models, and Poisson-Lie T-duality, following \cite{S, PSV}.
\subsection{Generalized metrics, again}
Let us now consider the $V_+$-boundary condition for an arbitrary compact oriented 3-manifold $M$ with a boundary $\Sigma$. We need to endow $\Sigma$ with a conformal structure, and then consider the subcomplexes
\begin{align*}
\Omega_{(+)}(\Sigma)&:=\Omega^{1,0}(\Sigma)\oplus\Omega^2(\Sigma)\subset\Omega(\Sigma)\\
\Omega_{(-)}(\Sigma)&:=\Omega^{0,1}(\Sigma)\oplus\Omega^2(\Sigma)\subset\Omega(\Sigma).
\end{align*}
The $V_+$-boundary condition is then given by the subcomplex
$$\bigl(\Omega_{(+)}(\Sigma)\otimes V_+\bigr) \oplus \bigl(\Omega_{(-)}(\Sigma)\otimes V_-\bigr) \subset\Omega(\Sigma)\otimes\g.$$

% We then let 
% $$\Omega_{b}(M),\,\Omega_{\bar b}(M)\subset\Omega(M)$$
% be the subcomplexes of the forms whose restrictions to $\Sigma$ are in $\Omega_{(+)}(\Sigma)$ or in $\Omega_{(-)}(\Sigma)$ respectively. Then the space of fields, given by the $V_+$-boundary condition, is
% $$\bigl(\Omega_{b}(M)[1]\otimes V_+\bigr) \oplus \bigl(\Omega_{\bar b}(M)[1]\otimes V_-\bigr)\subset \Omega(M)[1]\otimes\g.
% $$

% Let us now consider a generalization of the chiral boundary condition. Let us suppose that the Lie algebra $\g$ is split to an orthogonal sum
% $$\g=V_+\oplus V_-,\quad V_-=V_+^\perp$$
% of vector subspaces, with $\la,\ra|_{V_+}$ positive-definite and $\la,\ra|_{V_-}$ negative-definite. Such a splitting is called a \emph{generalized metric} on $\g$.

% If $\Sigma$ is a Riemann surface, let us consider the subcomplexes
% \begin{align*}
% \Omega_{(+)}(\Sigma)&:=\Omega^{1,0}(\Sigma)\oplus\Omega^2(\Sigma)\subset\Omega(\Sigma)\\
% \Omega_{(-)}(\Sigma)&:=\Omega^{0,1}(\Sigma)\oplus\Omega^2(\Sigma)\subset\Omega(\Sigma).
% \end{align*}
% If $M$ is an oriented 3-manifold with boundary $\Sigma$, we then get a boundary condition for the Chern-Simons theory on $M$, given by the subcomplex
% \begin{equation}\label{genbc}
% \bigl(\Omega_{(+)}(\Sigma)\otimes V_+\bigr) \oplus \bigl(\Omega_{(-)}(\Sigma)\otimes V_-\bigr)\subset \Omega(\Sigma)\otimes\g.
% \end{equation}
% Our BV space of fields is the subcomplex of $\Omega(M)\otimes\g$ of the forms whose restriction to $\Sigma$ is in \eqref{genbc}. 
The action functional is the usual Chern-Simons functional
$$S(A)=\int_M \frac 12 \la A,dA\ra + \frac16 \la A,[A,A]\ra,$$
without any boundary term.

% The case of $V_+=\g$, $V_-=0$, is the usual chiral boundary condition from the CS/WZW correspondence. Let us observe that \eqref{genbc} is (at least classically) a valid boundary condition, being a dg Lie subalgebra which is Lagrangian w.r.t.\ the natural pairing on $\Omega(\Sigma)\otimes\g$.

\subsection{A (classically) topological boundary condition}
Let us choose a Lagrangian Lie subalgebra $\h\subset\g$ (i.e.\ $\h^\perp=\h$) and let us consider the boundary condition given by the subcomplex
\begin{equation}\label{h-bc}
\Omega(\Sigma)\otimes\h\subset\Omega(\Sigma)\otimes\g.
\end{equation}
This boundary condition doesn't use any geometric structure on $\Sigma$, so it is (classically) topological, unlike the $V_+$-boundary condition. 

It should be noted that while the $V_+$-boundary condition completely removes the gauge symmetry on $\Sigma$, the  $\h$-boundary condition leaves us with a residual gauge symmetry on $\Sigma$, with gauge transformations taking values in $H$ (in the bulk the gauge transformations take values in $G$). This is reflected by the 0-form part of the boundary conditions, playing the role of ghosts - in the first case we have no ghosts on the boundary, and in the second case we have $\Omega^0(\Sigma)\otimes\h$. 

\begin{rem}
This boundary condition seems to have a 1-loop anomaly if $\h$ is not unimodular. Let us conjecture that we can still make sense of it by choosing an area form on the boundary (up to a constant multiple), at the price that the boundary condition will no longer be topological. 
\end{rem}

\subsection{2-dim $\sigma$-models on the CS boundary}

Let us now consider the 3-manifold 
$$M=\Sigma\times [0,1]$$
where $\Sigma$ is a Riemann surface.
The boundary of $M$ has 2 components, $\Sigma\times\{0\}$ and $\Sigma\times\{1\}$.
On $\Sigma\times\{0\}$ we impose the $V_+$-boundary condition and on $\Sigma\times\{1\}$ the $\h$-boundary condition. Our gauge transformations are thus trivial on $\Sigma\times\{0\}$ and take values in $H$ on $\Sigma\times\{1\}$. (The existence of a Lagrangian $\h\subset\g$ implies that $\dim V_+=\dim V_-$.)

As explained in \cite{S,PSV}, Chern-Simons theory on $M=\Sigma\times[0,1]$, with this boundary condition, is equivalent to a 2-dim $\sigma$-model with the worldsheet $\Sigma$ and the target space $G/H$. Namely, given points $z_1,\dots,z_n\in\Sigma$ and functions $f_1,\dots,f_n\in C^\infty(G/H)$, which we can see as $H$-invariant functions on $G$, we have the equality of correlation functions
\begin{equation}
\bigl\la f_1(\phi(z_1))\dots f_n(\phi(z_n))\bigr\ra_{\sigma\text{-model}}= \bigl\la f_1(\on{hol}_{\gamma_1})\dots f_n(\on{hol}_{\gamma_n}) \bigr\ra_\text{Chern-Simons}.
\end{equation}
Here $\phi:\Sigma\to G/H$ is the field of the $\sigma$-model, $\gamma_i$ is the path $\{z_i\}\times[0,1]$ in $M$ and $\on{hol}_{\gamma_i}$ stands for the holonomy of the connection along $\gamma_i$. Notice that $f_i(\on{hol}_{\gamma_i})$ is gauge invariant, due to the $H$-invariance of $f_i$.
$$
\begin{tikzpicture}
\coordinate (sh) at (0,-1.3);
\draw[yshift=-1.3cm, gray, very thin](6,1)--(1,1)--(0,0);
\draw[gray, very thin] (1,1)--+(sh);
\draw[thick,red] (1.3,0.6)--node[right]{$\gamma_1$}+(sh) (2.3,0.2)--node[right]{$\gamma_2$}+(sh)
(3.6,0.8)--node[right]{$\gamma_3$}+(sh) (4.5,0.4)--node[right]{$\gamma_4$}+(sh);
\draw (0,0)--(5,0)--(6,1)--(1,1)--cycle;
\draw[yshift=-1.3cm] (0,0)--(5,0)--(6,1);
\draw (0,0)--+(sh) (5,0)--+(sh) (6,1)--node[right]{$\Sigma\times I$}+(sh);

\begin{scope}[yshift=-2.5cm]
\draw[fill=black!5!white] (0,0)--(5,0)--(6,1)--(1,1)--cycle;
\draw (6,0.5)node{$\Sigma$};
\draw[inner sep=1pt] (1.3,0.6)node[pnt]{}node[right]{$\,z_1$} (2.3,0.2)node[pnt]{}node[right]{$\,z_2$}
(3.6,0.8)node[pnt]{}node[right]{$\,z_3$} (4.5,0.4)node[pnt]{}node[right]{$\,z_4$};
\end{scope}


\end{tikzpicture}
$$


In particular, if $\g_0$ is a simple compact Lie algebra and $\g=\g_0\oplus\bar\g_0$, where $\bar\g_0$ stands for $\g_0$ with the opposite inner product, we can take 
$$V_+=\g_0,\ V_-=\bar\g_0,\ \h=\text{diagonal }\g_0$$
and the corresponding $\sigma$-model is then the WZW model with the group $G_0$ (not just chiral, but full). We are, however, interested in more general examples, where $V_+$ and $V_-$ are not necessarily Lie subalgebras of $\g$.


\subsection{Poisson-Lie T-duality}

Let us now fix $V_+\subset\g$ and choose two Lagrangian Lie subalgebras $\h,\h'\subset\g$. The above-described boundary conditions then give us two 2d $\sigma$-models with the targets $G/H$ and $G/H'$. These two $\sigma$-models are called \emph{Poisson-Lie T-dual} \cite{KSe} to each other. While they are not completely equivalent (the topological boundary conditions are different, one given by $\h$ and the other by $\h'$), they differ only by topological degrees of freedom.

In the case of the usual (i.e.\ abelian) T-duality, $\g$ is abelian and $G=\g/\Lambda$ is a torus ($\Lambda\subset\g$ is a lattice), and also $H,H'\subset G$ are required to be tori. For a suitable choice of $\Lambda$ the seemingly different topological boundary conditions, given by $\h$ and $\h'$, actually coincide on the quantum level \cite{KSa}. This implies that the two $\sigma$-models, with the targets $G/H$ and $G/H'$, are truly equivalent. Such a statement is not (yet) known for non-abelian $G$'s. 

\section{Diagramatics, RG flow, and the Generalized Ricci tensor}\label{sec:diag}
In this section we shall study perturbatively the Chern-Simons theory on the ball $B^3$ with the $V_+$-boundary condition.
Our motivation is the link with 2dim $\sigma$-models and Poisson-Lie T-duality described above. We shall study  the short-distance behaviour close to $S^2$, and the resulting RG flow of the subspace $V_+\subset\g$ and the condition for conformal invariance. 

% To get a full equivalence with a 2d $\sigma$-model we would also need another boundary component and a choice of a Lagrangian Lie subalgebra $\h\subset\g$ as above. However, for the short-distance problems that we study this is not very relevant, so we can stay with our rather simple CS model on $B^3$.

\subsection{Regularization}
% The propagator of our model is the $\g\otimes\g$-valued 2-form
% $$P:=P_0\otimes t_+ + \bar P_0\otimes t_- \in \Omega^2\bigl(\cf_2(B^3),\g\otimes\g\bigr)$$
% where $t_+\in V_+\otimes V_+$ and $t_-\in V_-\otimes V_-$ is the (inverse of) the inner product on $V_+$ and on $V_-$ respectively.

 Feynman diagrams computed with the propagator \eqref{gmprop} in general diverge, so we need to introduce a regularization.

We choose a smooth cutoff function
$$\ell:S^2\to(0,\infty)$$ and  we regularize our integrals by preventing the projections of the points to $S^2$ to be closer than $\ell$.

More precisely, we replace $\omega$ (see \eqref{omega}) with
$$\omega^{(\ell)}:=H_\ell\, \omega$$
where $H_\ell:\cf_2(S^2)\to\{0,1\}$ is given by
$$
H_\ell(z_1,z_2)=
\begin{cases}
0 & \text{if } d(z_1,z_2)\leq \bigl(\ell(z_1)+\ell(z_2)\bigr)/2\\
1 & \text{otherwise}
\end{cases}
$$
where $d(z_1,z_2)$ is the spherical distance of points on $S^2$.\footnote{%
A more natural choice (not using the spherical distance) is to declare that $\ell^{-2}$ is a Riemannian metric on $S^2$ in the given conformal class and that $H_\ell$ is 0 iff the geodesic distance of the two points is less than 1. For our purposes these two cutoffs give the same results.}
Then we replace $P_0$ with
$$P_0^{(\ell)}=p^*\omega^{(\ell)}/2\pi i$$
and the propagator $P$ with
$$P^{(\ell)}=P_0^{(\ell)}\otimes t_+ + \bar P_0^{(\ell)}\otimes t_-$$
 Now all the integrals converge absolutely, as explained in \cite{AS,K} using suitable compactifications of configuration spaces.

\subsection{Diagramatics}

% The propagator is the $\g\otimes\g$-valued 2-form
% $$P:=P_0\otimes t_+ + \bar P_0\otimes t_- \in \Omega^2\bigl(\cf_2(B^3),\g\otimes\g\bigr)$$
% where $t_+\in V_+\otimes V_+$ and $t_-\in V_-\otimes V_-$ is the (inverse of) the inner product on $V_+$ and on $V_-$ respectively.

We can now perturbatively compute the $k$-point correlation forms%\footnote{%
%The forms $G_k^{(\ell)}$ really live in the space of PA-forms on a compactification of $\cf_k(B^3)$.  See [operads-motives,...] for the proper setup.}
$$G_k^{(\ell)}\in\Omega^k\bigl(\cf_k(B^3)\bigr)[\![\hbar]\!]\otimes\g^{\otimes k}$$
$$G_k^{(\ell)}(x_1,\dots,x_k)=\bigl\la A(x_1)A(x_2)\dots A(x_k)\bigr\ra^{(\ell)}$$
in the usual way:

If $\Gamma$ is a tadpole-free graph with $k$ leaves and $n$ internal vertices, all of them 3-valent, we put $P^{(\ell)}$ on every  edge, the structure constants of $\g$
$$c\in\g^*\otimes\g^*\otimes\g^*$$
(where we identify $\g$ with $\g^*$ via the inner product) on every vertex, contract corresponding $\g$'s with $\g^*$'s, and finally integrate over the internal vertices, i.e.\ over $\cf_n(B^3)$.  Let us denote the result by
$$\alpha^{(\ell)}_{\Gamma}\in\Omega^k\bigl(\cf_k(B^3)\bigr)[\![\hbar]\!]\otimes\g^{\otimes k}.$$
We then have
$$G_k^{(\ell)}= 
\sum_\Gamma \frac{(i\hbar)^{k-\chi(\Gamma)}}{|\on{Aut}_0(\Gamma)|}\,\alpha^{(\ell)}_{\Gamma}$$ 
where the sum runs over all graphs with $k$ labelled leaves, $\chi(\Gamma)$ is the Euler characteristic of $\Gamma$ and $\on{Aut}_0(\Gamma)$ is its group of automorphisms of $\Gamma$ preserving the leaves.

Since the propagator is the sum of two terms
$$P^{(\ell)}=P^{(\ell)}_+ + P^{(\ell)}_-\qquad (P^{(\ell)}_+=P^{(\ell)}_0\otimes t_+,\ P^{(\ell)}_-=\bar P^{(\ell)}_0\otimes t_-),$$
it is convenient to use graphs $\Gamma'$ with signs over the edges:
$$
\begin{tikzpicture}[scale=0.6]
\coordinate (a) at (0:2cm);
\coordinate (b) at (120:2cm);
\coordinate (c) at (-120:2cm);
\coordinate (A) at (0:1cm);
\coordinate (B) at (120:1cm);
\coordinate (C) at (-120:1cm);

\draw (a)--node[proj]{\tiny $-$}(A) (b)--node[proj]{\tiny $+$}(B) (c)--node[proj]{\tiny $+$}(C);
\draw (A) to[bend right] node[proj]{\tiny $-$}(B)to[bend right] node[proj]{\tiny $+$}(C)to[bend right] node[proj]{\tiny $-$}(A);
\end{tikzpicture}
$$
Now we put $P_+^{(\ell)}$ or $P_-^{(\ell)}$ on every edge according to its sign and $c$ on every vertex. The integral over the internal vertices will give us
$$\alpha^{(\ell)}_{\Gamma'}\in\Omega^k\bigl(\cf_k(B^3)\bigr)[\![\hbar]\!]\otimes\g^{\otimes k}$$
and for any unsigned $\Gamma$ we have $\alpha^{(\ell)}_{\Gamma}=\sum_{\Gamma'}\alpha^{(\ell)}_{\Gamma'}$, where we sum over all signed versions $\Gamma'$ of $\Gamma$.

The advantage of these signed graphs $\Gamma'$ is that we have
$$\alpha^{(\ell)}_{\Gamma'} = w^{(\ell)}_{\Gamma'}\otimes T_{\Gamma'},\qquad w_{\Gamma'}\in\Omega^k\bigl(\cf_k(B^3)\bigr)[\![\hbar]\!],\ T_{\Gamma'}\in\g^{\otimes n}$$
where $w^{(\ell)}_{\Gamma'}$ is independent of $\g$ and of $V_+$.

Namely, $w^{(\ell)}_{\Gamma'}$ is obtained by putting $P^{(\ell)}_0$ to every  $(+)$-edge, $\bar P^{(\ell)}_0$ on every  $(-)$-edge, and integrating over the internal vertices. The Lie algebra factor $T_{\Gamma'}$ is obtained by putting $t_+$ on every $(+)$-edge, $t_-$ on every $(-)$-edge, $c$ on every vertex, and contracting corresponding $\g$'s with $\g^*$'s.

\begin{rem}[Signs] 
In the discussion above we glossed over the signs appearing in the calculation of $G_k^{(\ell)}$'s. 
We  refer the reader to \cite{AS} for the details. The idea is to see $P_\pm^{(\ell)}$ as elements of $\Omega^2(\cf_2(B^3))\otimes\bw^2(\g\oplus\g)$, which makes them symmetric under the flip of the two points, so we don't need to orient the edges. We then take the product of $P_\pm^{(\ell)}$'s over the edges to get an element of $\Omega(\cf_V(B^3))\otimes\bw(\g^V)$, where $V$ is the set of the vertices. Finally, at each internal vertex we contract with the structure constants and integrate. Since the objects/operations assigned to edges and to internal vertices are even, the outcome is well defined (i.e.\ independent of the order).

On the other hand, to define $w^{(\ell)}_{\Gamma}$ and $T_{\Gamma}$ for a signed $\Gamma$ individually (i.e.\ not just their product) we need additional choices on $\Gamma$, e.g.\ a cyclic order at each internal vertex. To make things explicit, we shall always use the anticlockwise order in the diagrams that we draw.
\end{rem}

% \subsection{Regularization}
% The integrals defining $w_{\Gamma_s}$'s in general diverge. To regularize them we shall choose a cutoff function
% $$\ell:S^2\to(0,\pi)$$ and replace $\omega$ (see \eqref{omega}) with
% $$\omega^{(\ell)}:=H_\ell\, \omega$$
% where $H_\ell:\cf_2(S^2)\to\{0,1\}$ is given by
% $$
% H_\ell(z_1,z_2)=
% \begin{cases}
% 0 & \text{if } d(z_1,z_2)\leq \ell(\on{mid}(z_1,z_2))\\
% 1 & \text{otherwise.}
% \end{cases}
% $$
% Here $d(z_1,z_2)$ is the spherical distance of points on $S^2$, and $\on{mid}(z_1,z_2)\in S^2$ is the midpoint between $z_1$ and $z_2$. Then we replace $P_0$ with
% $$P_0^{(\ell)}=p^*\omega^{(\ell)}/2\pi i.$$
% In other words, we regularize our integrals by preventing the projections of the points on $S^2$ to be closer than $\ell$. Now all the integrals $\alpha_{\Gamma,V_+}^{(\ell)}$ converge absolutely, as explained in [KONTSEVICH].


\subsection{Generalized Ricci tensor and conformal invariance}
We shall say that a signed diagram $\Gamma$ is convergent if the limit
$$\lim_{\epsilon\to 0_+}w_{\Gamma}^{(\epsilon\ell)}$$
exists and is independent of $\ell$. 

We shall see in a moment that the only divergent 1-loop 1PI diagram is 
$$
D:=
\begin{tikzpicture}[scale=0.6, baseline=-0.6ex]
\coordinate (u) at (-0.5,0);
\coordinate (x) at (1,0);
\coordinate (y) at (3,0) {};
\coordinate (v) at (4.5,0);
\node (plus) at (2,0.8) [proj] {\tiny $+$};
\node (minus) at (2,-0.8) [proj] {\tiny$-$};
\draw (u)--node[proj]{\tiny $+$}(x) (y)--node[proj]{\tiny $-$}(v);
\draw (x) to[bend left] (plus) (plus)to[bend left] (y)
      (x) to[bend right] (minus) (minus)to[bend right] (y) ;
\end{tikzpicture}
$$
%Indeed, one can check that all the 1-loop 1PI diagrams with at least 3 leaves converge. Among the diagrams with 2 leaves, if
%we have two $+$'s or two $-$'s in the internal loop then the integrant is identically zero, as $P_0^2=0$ (which follows from $\omega^2=0$). We shall see that the leaves must have opposite signs in a moment.
As a result, the 1-loop condition for conformal invariance is 
$$T_{D}=0.$$

The element $-T_{D}\in V_+\otimes V_-$ is known as the \emph{generalized Ricci tensor} of the generalized metric $V_+\subset\g$ \cite{CSW,G,SV,???}. The 1-loop conformality condition is thus the vanishing of the generalized Ricci tensor. %{\color{red} CITE \cite{SST} PROPERLY}

\begin{rem}
The 1-loop conformality condition $T_D=0$ (and the corresponding role of $T_D$ as a beta-function, see \S\ref{ss:RGflow}) was discovered in \cite{SST} for a 2-dim model which can be seen as a Hamiltonian version of the CS model with the $V_+$-boundary condition. This somewhat miraculous result of \emph{op.cit.} thus gets a natural explanation, coming from a single Chern-Simons diagram.
\end{rem}

\subsection{Effective action}
As usual, it is more economical to study the  1PI effective action $S^{(\ell)}_\text{eff}$ rather than the correlation forms $G_k^{(\ell)}$. It is a functional on our BV space of fields
$$\bigl(\Omega_b(B^3)\otimes V_+\, \oplus\, \Omega_{\bar b}(B^3)\otimes V_-\bigr)[1] $$
given by
$$S^{(\ell)}_\text{eff}(A)= S(A) + 
\sum_\Gamma \frac{(i\hbar)^{1-\chi(\Gamma)}}{|\on{Aut}(\Gamma)|} S_\Gamma^{(\ell)}(A).$$
Here $\Gamma$ runs over all 1PI graphs with at least one loop, $1-\chi(\Gamma)$ is the number of loops of $\Gamma$, and $\on{Aut}(\Gamma)$ is the group of all automorphisms of $\Gamma$. Finally, $S_\Gamma^{(\ell)}(A)$ is obtained by putting $A$ on every leaf, $P^{(\ell)}$ on every internal edge, $c$ on every internal vertex, contracting corresponding $\g$'s and $\g^*$'s, and integrating.


% Its Taylor coefficients are forms [BE CAREFUL HERE - distributional forms]
% $$\tilde G_k\in\Omega^{2k}\bigl(\cf_k(B^3)\bigr)\otimes(\g^*)^{\otimes k}$$
% obtained in a similar way as $G_k$, but summing only over the 1PI graphs, stripping off the propagators on the leaves, and integrating only over the vertices not attached to the leaves.
% The effective action is then the formal power series $S_\text{eff}$ on the space of fields
% $$\bigl(\Omega_b(B^3)\otimes V_+\, \oplus\, \Omega_{\bar b}(B^3)\otimes V_-\bigr)[1] $$
% given by
% $$S_\text{eff}(A)=\sum_k \frac1{k!}\int_{\cf_k(B^3)}\la \tilde G_k,p_1^* A\dots p_k^* A\ra $$
% where $p_i:\cf_k(B^3)\to B^3$ ($i=1,\dots,k$) are the projections.

Let us now study the 1-loop part of $S_\text{eff}$. Only the term quadratic in $A$ is divergent (see Appendix). It is given by the diagram
$$
\begin{tikzpicture}[baseline=-1,scale=0.8]
\coordinate (a) at (0,0);
\coordinate (b) at (2,0);
\node[left] (A1) at (-0.2,0) {${\displaystyle\frac {i\hbar} 4}\quad A$};
\node[right] (A2) at (2.2,0) {$A$};

\draw (a) to[out=60,in=120] (b) to[out=-120,in=-60] (a);
\draw[gray] (a)--(A1);
\draw[gray] (b)--(A2);

\end{tikzpicture}
$$
Since $(P_0^{(\ell)})^2=(\bar P_0^{(\ell)})^2=0$, the diagram is equal to
$$
\begin{tikzpicture}[baseline=-1, scale=0.8]
\coordinate (a) at (0,0);
\coordinate (b) at (2,0);
\node[left] (A1) at (-0.2,0) {${\displaystyle\frac {i\hbar} 2}\quad A$};
\node[right] (A2) at (2.2,0) {$A$};

\draw (a) to[out=60,in=120]node[proj]{\tiny$+$} (b) to[out=-120,in=-60]node[proj]{\tiny$-$} (a);
\draw[gray] (a)--(A1);
\draw[gray] (b)--(A2);

\end{tikzpicture}
$$
To get its divergent part, we use the following lemma which can be proved by a straightforward calculation (see Appendix).
\begin{lem}\label{lem:CS}
If $\ell_1,\ell_2:S^2\to(0,\infty)$ are smooth, $\alpha,\beta\in\Omega(B^3)$, and if $p_1$ and $p_2$ are the projections $\cf_2(B^3)\to B^3$, then
\begin{multline*}
\lim_{\epsilon\to0_+}\int_{\cf_2(B^3)}p^*(H_{\epsilon\ell_1}-H_{\epsilon\ell_2})\;P_0\bar P_0\;p_1^*\alpha\; p_2^*\beta\\
=-\frac1{2\pi} \int_{S^2}\log(\ell_1/\ell_2)\;(\alpha^{(1)}|_{S^2})\,*(\beta^{(1)}|_{S^2}) 
\end{multline*}
where $\alpha^{(1)}$ is the 1-form part of $\alpha$ and $*$ is the Hodge $*$ on $S^2$.
\end{lem}
We thus have
\begin{multline}\label{conf-anom}
\lim_{\epsilon\to0_+}\Bigl( S_\text{eff}^{(\epsilon\ell_1),\text{1-loop}}(A) - S_\text{eff}^{(\epsilon\ell_2),\text{1-loop}}(A)\Bigr)\\
=-\frac{\hbar}{2\pi}\int_{S^2} \log(\ell_1/\ell_2)\;\la T_{D}, A^{(1)}_+ A^{(1)}_-\ra
\end{multline}
where $A_\pm$ is the component of $A$ with the values in $V_\pm$. Notice that on $S^2$ we have $A^{(1)}_+A^{(1)}_+=A^{(1)}_-A^{(1)}_-=0$ because of the boundary condition, which explains why only the diagram $D$ appears in the result.

\subsection{RG flow of $V_+$}\label{ss:RGflow}
If the generalized Ricci tensor $T_{D}$ is non-zero, the limit $\lim_{\epsilon\to0_+}S_\text{eff}^{(\epsilon\ell),\text{1-loop}}$ doesn't exist.
From \eqref{conf-anom} we get
\begin{equation}\label{Seff-asymp}
  \lim_{\epsilon\to0_+} \epsilon\,\frac d{d\epsilon}\; S_\text{eff}^{(\epsilon\ell),\text{1-loop}}(A)= -\frac\hbar{2\pi}\int_{S^2} \la T_{D}, A^{(1)}_+ A^{(1)}_-\ra.  
\end{equation}

To get a meaningful effective action in the limit we have to renormalize $V_+$, i.e.\ to suppose that $V_+(\epsilon)\subset\g$ is a function of $\epsilon$ such that
$$
\lim_{\epsilon\to0_+}S_\text{eff}^{(\epsilon\ell),\text{1-loop}}(A,V_+(\epsilon))
$$
exists (where we made the dependence of $S_\text{eff}$ on $V_+$ explicit). More precisely, we impose
\begin{equation}\label{RG-howto}
\lim_{\epsilon\to0_+} \epsilon\,\frac d{d\epsilon}\; S_\text{eff}^{(\epsilon\ell),\text{1-loop}}(A,V_+(\epsilon))=0
\end{equation}
and from that and from \eqref{Seff-asymp} get an ODE for $V_+$, i.e.\ its renormalization group flow.

This usual approach has to be slightly modified, however, because the space of fields depends on $\epsilon$ (as $V_+$, and thus the boundary condition, depends on $\epsilon$). We will redefine the fields so that the boundary condition doesn't change, and instead get a change of the action $S$.

If we have an infinitesimal $\delta R\in\bw^2\g=\mf{so}(\g)$, let us deform $V_+$ to $(1+\delta R)V_+$ (if $v\in\g$, by $\delta R\,v\in\g$ we mean the element given by $\la\delta R\,v,w\ra=\la R,v\otimes w\ra$ for all $w\in\g$). We can redefine the fields so that they satisfy the deformed boundary condition via $A\to A+\delta A$, $\delta A= f\,\delta R\,A$, where $f\in C^\infty(B^3)$ is an arbitrary function s.t.\ $f|_{S^2}=1$.


The variation of the (classical) action that we obtain is
$$S(A+\delta A)-S(A) = 
\int_{B^3}\bigl\la f\,\delta R, A\,dA+\tfrac12A[A,A]\bigr\ra + \frac12\int_{S^2}\la \delta R,AA\ra.
$$
% If we choose an infinitesimal $\delta R\in\bw^2\g$ and an arbitrary $f\in C^\infty(B^3)$ s.t.\ $f|_{S^2}=1$, and we set $\delta A=\la f\,\delta R,A\ra$, we get
% $$\delta S(A)= \int_{B^3}\bigl\la f\,\delta R, A\,dA+\tfrac12A[A,A]\bigr\ra + \frac12\int_{S^2}\la \delta R,AA\ra.$$
 Let us note that the first integral is BV-exact, generated by
 $$\frac12\int_{B^3}\la f\,\delta R, AA\ra.$$
%This transformation replaces the boundary condition $V_+$ by $(1+\delta R)V_+$. 
In other words, the change of the boundary condition is equivalent (up to a BV-exact term) to not changing the boundary condition, and adding the boundary term
$$-\frac12\int_{S^2}\la \delta R,AA\ra$$
instead.

Now we can interpret \eqref{RG-howto}: if 
\begin{subequations}
\begin{equation}
V_+(\epsilon+d\epsilon)=\bigl(1+\frac{d\epsilon}\epsilon\,\hbar\, B\bigr)V_+(\epsilon)
\end{equation}
 for a suitable $B\in\bw^2\g$, then \eqref{RG-howto} gives us (in the limit $\epsilon\to0$)
$$-\frac\hbar{2\pi}\int_{S^2} \la T_{D}, A^{(1)}_+ A^{(1)}_-\ra -\frac\hbar2\int_{S^2}\la B,AA\ra=0$$
and so we can set
\begin{equation}
B=-\frac1\pi (T_{D}^{\ }-T_{D}^{\hphantom{x}\text{op}}).
\end{equation}
We thus found the 1-loop RG flow of $V_+$ in our model, with $\hbar B$ playing the role of the $\beta$-function. 
\end{subequations}

\section{Further developments}
In this section we shall very briefly summarize natural generalizations of what we did in this paper; they will be treated in more detail elsewhere. Before starting, let us mention that the model from \S\ref{sec:diag} should also be developed in more detail, whether it is the calculation of the Weyl anomaly \eqref{conf-anom} to higher powers of $\hbar$, or a calculation of a generalized Knizhnik-Zamolodchikov connection for  Wilson lines with endpoints on $S^2$.

\subsection{Courant $\sigma$-model and generalized Ricci tensor}
Chern-Simons theory with the boundary condition given by a generalized metric $V_+\subset\g$ has a natural generalization to a Courant $\sigma$-model (again a 3-dim TFT) with a boundary condition given, again, by a generalized metric in the corresponding Courant algebroid. Such a model is needed for a formulation of the Poisson-Lie T-duality with spectators. Moreover, if the Courant algebroid is exact, this model is directly equivalent to a 2-dim $\sigma$-model.

\subsubsection{Courant $\sigma$-model}
Let us describe Courant $\sigma$-models supposing that the underlying Courant algebroid is a trivial vector bundle and that its base is a vector space (this trivialization is a part of our gauge fixing); we refer the reader to [WHERE?] for an invariant and global description. 

We need a vector space $W$ (the base of the Courant algebroid) and another vector space $V$ with an (indefinite) inner product (the fibre of the Courant algebroid). Finally, we need a function $C$ of degree 3 on the graded symplectic manifold 
$$W\oplus V[1]\oplus W^*[2]$$
satisfying the classical master equation $\{C,C\}=0$. Written in components, $C$ is of the form
$$C(x,\theta,p)=\frac16\,c_{abc}(x)\,\theta^a\theta^b\theta^c + \rho^i_a(x)\,p_i\theta^a.$$

If now $M$ is a closed oriented 3-manifold, the space of fields of the Courant $\sigma$-model on $M$ is
$$\Omega(M,W)\oplus\Omega(M,V)[1]\oplus\Omega(M,W^*)[2]$$
(with the 3 component still denoted by $x$, $\theta$, and $p$)
and the action functional is
$$S(x,\theta,p)=\int_M\la p,dx\ra + \frac12 \la\theta,d\theta\ra + C(x,\theta,p).$$

\subsubsection{Boundary condition}
If $M$ has a boundary $\Sigma$, our boundary condition is given as follows. We choose an orthogonal splitting
$$V=V_+\oplus V_-$$
(i.e.\ a generalized metric), and impose that the boundary fields are in the subcomplex
\begin{multline*}
\Omega(\Sigma,W)\oplus\bigl(\Omega_{(+)}(\Sigma,V_+)\oplus\Omega_{(-)}(\Sigma,V_-)\bigr)[1]\\
\subset\ \Omega(\Sigma,W)\oplus\Omega(\Sigma,V)[1]\oplus\Omega(\Sigma,W^*)[2]. 
\end{multline*}
The action functional remains the same.

\subsubsection{Propagators}
Let us now suppose that $M=H^3\subset\R^3$ is the upper half space (we do not take $M=B^3$ since our complex of fields would have a non-trivial cohomology, and for our purposes $M=H^3$ is sufficient). The total propagator is the sum
$$P=P_0\otimes t_+ + \bar P_0\otimes t_- + P_1\otimes\id + P_1^{op}\otimes\id^{op}.$$
Here $P_0$ is as before, $t_\pm\in S^2V_\pm$ as well, 
$$P_1\in\Omega^2(\cf_2(H^3))$$ a suitable closed 2-form vanishing when the first point is on the boundary and $\id\in W^*\otimes W$ the identity $W\to W$. Graphically we shall represent the terms in this sum as
$$P=\ 
\begin{tikzpicture}[baseline=-0.1cm]
\draw (0,0)--node[proj]{\tiny$+$}(1,0);
\end{tikzpicture}
\ +\ 
\begin{tikzpicture}[baseline=-0.1cm]
\draw (0,0)--node[proj]{\tiny$-$}(1,0);
\end{tikzpicture}
\ +\ 
\begin{tikzpicture}[baseline=-0.1cm]
\draw[dotted,->-=0.65] (0,0)--(1,0);
\end{tikzpicture}
\ +\ 
\begin{tikzpicture}[baseline=-0.1cm]
\draw[dotted,->-=0.65] (1,0)--(0,0);
\end{tikzpicture}
$$


For $P_1$ we shall take, following \cite{K2},
$$P_1=r_1^*\omega_{S^2}/4\pi$$
where $\omega_{S^2}$ is the area form on $S^2$ and $r_1\colon\cf_2(H^3)\to S^2$ sends a pair of points $(q_1,q_2)$ to the unit vector tangent at $q_1$ to the hyperbolic geodesic passing through $q_1$ and $q_2$. 


\subsubsection{Diagramatics}
Let us pick a point $x_0\in W$ around which we shall to the perturbative expansion. We have two types of vertices
$$
\begin{tikzpicture}[scale=0.6]
\draw(0,0)--(1,0)(0,0)--(-0.5,0.866)(0,0)--(-0.5,-0.866);
\node at (2,0){and};
\draw (3,0)--(4.5,0)node[anch]{};
\draw[dotted,->-=0.65] (4.5,0)--(6,0);
\end{tikzpicture}
$$
At the first vertex we put $c_{abc}(x_0)$ and at the second one $\rho^i_a(x_0)$. Furthermore, each of these vertices can have an arbitrary number of incoming dotted lines; we need to differentiate $c_{abc}$'s and $\rho^i_a$'s for each such a line.
Finally, the solid lines should be split to the sum of \tikz[baseline]{\draw (0,0.5ex)--node[proj]{\tiny$+$}(1,0.5ex);} and  \tikz[baseline]{\draw (0,0.5ex)--node[proj]{\tiny$-$}(1,0.5ex);}.

Now each diagram $\Gamma$ evaluates as the product of two factors $w_\Gamma$ and $T_\Gamma$: $w_\Gamma$ is an integral of a product of $P_0$'s, $\bar P_0$'s, and $P_1$'s, and $T_\Gamma$ a contraction of $c(x_0)$'s, $\rho(x_0)$'s, and of their derivatives.

\subsubsection{1-loop RG flow and Generalized Ricci tensor}
We need to regularize $P_0$ to $P_0^{(\ell)}$ as above, though $P_1$ doesn't need to be regularized. A simple calculation (see Appendix) shows that the divergent part of the 1-loop effective action is given by $T_{D'}$ (a replacement of $T_D$) where
\begin{equation}\label{ggric}
D'=
\begin{tikzpicture}[scale=0.6, baseline=-0.6ex]
\node (u) at (-0.5,0) {};
\coordinate (x) at (1,0);
\coordinate (y) at (3,0) {};
\node (v) at (4.5,0) {};
\node (plus) at (2,0.8) [proj] {\tiny $+$};
\node (minus) at (2,-0.8) [proj] {\tiny$-$};
\draw (u)--node[proj]{\tiny $+$}(x) (y)--node[proj]{\tiny $-$}(v);
\draw (x) to[bend left] (plus) (plus)to[bend left] (y)
      (x) to[bend right] (minus) (minus)to[bend right] (y) ;
\end{tikzpicture}
+\;\frac12
\begin{tikzpicture}[scale=0.6, baseline=-0.6ex]
\node (u) at (-1.5,-1) {};
\node (v) at (1.5,-1) {};
\coordinate (x) at (0,0);
\node (minus) at (0,1) [proj] {\tiny$+$};
\draw (u)--node[proj]{\tiny $+$}(x)--node[proj]{\tiny $-$}(v) (x)to[out=75, in=-75](minus);
\node (rho) at (-0.8,0.7) [anch]  {};
\draw (minus) to[out=140,in=90] (rho);
\draw[dotted,->-=0.65] (rho) to[out=-70,in=160] (x);
\end{tikzpicture}
-\;\frac12
\begin{tikzpicture}[scale=0.6, baseline=-0.6ex]
\node (u) at (-1.5,-1) {};
\node (v) at (1.5,-1) {};
\coordinate (x) at (0,0);
\node (minus) at (0,1) [proj] {\tiny$-$};
\draw (u)--node[proj]{\tiny $+$}(x)--node[proj]{\tiny $-$}(v) (x)to[out=75, in=-75](minus);
\node (rho) at (-0.8,0.7) [anch]  {};
\draw (minus) to[out=140,in=90] (rho);
\draw[dotted,->-=0.65] (rho) to[out=-70,in=160] (x);
\end{tikzpicture}
\end{equation}

This expression is, up to the sign, the \emph{generalized Ricci tensor} of the generalized metric $V_+$ in our Courant algebroid. As a result we see that the generalized Ricci tensor gives us the 1-loop RG flow.

\begin{rem}
Let us be more precise about the appearance of $T_{D'}$: we have
\begin{multline*}
\lim_{\epsilon\to0_+}\Bigl( S_\text{eff}^{(\epsilon\ell_1),\text{1-loop}}(x,\theta,p) - S_\text{eff}^{(\epsilon\ell_2),\text{1-loop}}(x,\theta,p)\Bigr)\\
=-\frac{\hbar}{2\pi}\int_{S^2} \log(\ell_1/\ell_2)\;\la T_{D'}(x), \theta^{(1)}_+ \theta^{(1)}_-\ra  
\end{multline*}
where $T_{D'}(x)$ denotes $T_{D'}$ computed with $c$'s and $\rho$'s at the point $x\in W$.  {\color{red} THE SHIFT OF $x_0$ TO $x$ GIVEN BY TAYLOR SERIES - LOOKS FISHY.}
\end{rem}

This problem requires, however, a more detailed analysis. The generalized Ricci tensor depends on the gauge fixing (though only up to a redefinition of fields) -- in fact, it depends on a so-called divergence operator \cite{G}, which seems closely related to the tadpole diagram
$$
\begin{tikzpicture}
\clip(-0.1,-0.1) rectangle (2,1);
\node[anch] (a) at (1,0){};
\draw (0,0)--(a);
\draw[dotted,->-=0.9] (a)..controls (2.5,0) and (1,1.5)..(a);
%\draw[dotted] (a) to[out=0,in=-60] (1.5,0.5);
%\draw[dotted,->-=0.65](1.5,0.5) to[out=120,in=90](a);
\end{tikzpicture}
$$
in our model. Moreover, a conformal invariance should also require a kind of a dilaton field (indeed, when the underlying Courant algebroid is exact, our model is equivalent to a 2-dim $\sigma$-model with the target $W$, and in that case we should certainly see a dilaton field). The results of \cite{SV2} suggest that this generalized dilaton field should be a half-density and the conformality condition should require it to be an eigenvector of a natural Laplace operator. We shall leave these problems to a future work.



\subsection{AKSZ models, higher dualities, and RG flow}
The link between the Poisson-Lie T-duality of 2-dim $\sigma$-models and the 3-dim Chern-Simons (or Courant) theory has a natural generalization to higher dimensions, when (possibly higher gauge) $n$-dim models are obtained from boundary conditions of $n+1$-dim topological models, namely of $n+1$-dim AKSZ model \cite{AKSZ}. We refer the reader to \cite{PSV} for details.

In this case we have a dg symplectic manifold $X$ with symplectic form of degree $n$. If $M$ is a $n+1$-dim manifold with a boundary $\Sigma$, a boundary condition for the AKSZ model is an dg exact Lagrangian submanifold $\mc F$ in the symplectic space of all boundary fields
$$\mc X:=\on{Maps}(T[1]\Sigma,X).$$

While the AKSZ model is topological, the boundary condition $\mc F$ might be not (as was the case of the boundary condition given by a generalized metric). In particular, under perturbative quantization, $\mc F$ might be scale dependent, i.e.\ at least naively we should expect a vector field (the RG flow) on the space (the exact Lagrangian Grassmannian) $\mc{G}_\mc X$ of all $\mc F$'s.

Let us only describe how to calculate the RG flow.
Since for any $\mc F\in\mc{G}_\mc X$ we have
$$T_\mc F \mc{G}_\mc X =C^\infty(\mc F), $$
the RG flow should assign a function on $\mc F$, i.e.\ a functional on the space of the boundary fields, to every $\mc F$. This functional is, following the calculation from \S\ref{ss:RGflow}, equal to
\begin{equation}\label{akszrg}
\lim_{\epsilon\to0_+} \epsilon\,\frac d{d\epsilon}\; S_\text{eff}^{(\epsilon\ell)}.
\end{equation}



\appendix

\section{1-loop divergent diagrams}
\subsection{Chern-Simons}
Let us prove Lemma \ref{lem:CS}. In place of the ball $B^3$ we shall be using the closed upper half space $H^3$ (with the boundary identified with $\C$), and we shall suppose that $\alpha$ and $\beta$ are compactly supported. We shall use the following coordinates on $\cf_2(H^3)$: if $(q_1,q_2)\in\cf_2(H^3)$, let $(z,z+u):=p(q_1,q_2)\in\C^2$, and let the vertical projections of $q_1$ and $q_2$ to the plane be $z+t_1u$ and $z+t_2u$, $0\leq t_1<t_2\leq1$. We want to compute
$$I:=
\lim_{\epsilon\to0_+}\int_{\cf_2(H^3)}p^*(H_{\epsilon\ell_1}-H_{\epsilon\ell_2})\;\frac1{4\pi^2}\,\frac{dz\,du\,d\bar z\,d\bar u}{|u|^4}\,p_1^*\alpha\, p_2^*\beta
$$

Supposing that $\alpha$ and $\beta$ are 1-forms, let us write $\alpha$ as $\alpha=a_+dz + a_-d\bar z + a_h dh$, where $h$ is the height coordinate on $H^3$, and similarly 
$\beta=b_+dz + b_-d\bar z + b_h dh$. The terms with $dh$ do not contribute to the limit, and so we can suppose that they vanish. We then have
\begin{align*}
p_1^*\alpha&=a_+\, d(z+t_1 u) + a_-\, d(\bar z + t_1\bar u)\\
p_2^*\beta&=b_+\, d(z+t_2 u) + b_-\, d(\bar z + t_2\bar u)
\end{align*}
and so
\begin{multline*}
I=-\frac1{4\pi^2}\lim_{\epsilon\to0_+}\int_{\cf_2(H^3)}p^*(H_{\epsilon\ell_1}-H_{\epsilon\ell_2})\;\frac{du\,d\bar u}{|u|^2}\,dw\,d\bar w\,dt_1\,dt_2\,(a_+b_-+a_-b_+) \\
=\frac i{4\pi^2}\lim_{\epsilon\to0_+}\int_{\cf_2(H^3)}p^*(H_{\epsilon\ell_1}-H_{\epsilon\ell_2})\;\frac{du\,d\bar u}{|u|^2}\,dt_1\,dt_2\,\alpha *\beta.
\end{multline*}
The integral of 
$$p^*(H_{\epsilon\ell_1}-H_{\epsilon\ell_2})\;\frac{du\,d\bar u}{|u|^2}$$
gives $-4\pi i\log(\ell_1/\ell_2)$, the integral of $dt_1\,dt_2$ gives $1/2$, and the orientation changes the sign, so in the end
$$I=-\frac1{2\pi}\int_\C\log(\ell_1/\ell_2)\,\alpha*\beta$$
as we wanted to show.

If one of $\alpha,\beta$ is a 0-form and the other a 2-form, a similar calculation gives $I=0$.


\subsection{Courant model}
We have two new divergent 1-loop diagrams, namely
$$
\begin{tikzpicture}[scale=0.8, baseline=1ex]
\coordinate (x) at (0,0);
\node (minus) at (0,1) [proj] {\tiny$+$};
\draw (-0.3,-0.3)--(x)--(0.3,-0.3) (x) to[out=75, in=-75](minus);
\node (rho) at (-0.8,0.7) [anch]  {};
\draw (minus) to[out=140,in=90] (rho);
\draw[dotted,->-=0.65] (rho) to[out=-70,in=160] (x);
\end{tikzpicture}
\qquad\text{and}\qquad
\begin{tikzpicture}[scale=0.8, baseline=1ex]
\coordinate (x) at (0,0);
\node (minus) at (0,1) [proj] {\tiny$-$};
\draw (-0.3,-0.3)--(x)--(0.3,-0.3) (x) to[out=75, in=-75](minus);
\node (rho) at (-0.8,0.7) [anch]  {};
\draw (minus) to[out=140,in=90] (rho);
\draw[dotted,->-=0.65] (rho) to[out=-70,in=160] (x);
\end{tikzpicture}
$$
Let us compute the divergent part of the first one (the second one is similar).

Given $\alpha\in\Omega^2(\C)$ with a compact support, we want to find
$$J:=
\lim_{\epsilon\to0_+}\int_{\cf_2(H^3)}p^*(H_{\epsilon\ell_1}-H_{\epsilon\ell_2})\;P_0P_1\,p_2^*\alpha.
$$
Using the same coordinates as above, we have
$$P_1=\frac1{4\pi i}(\frac{du}u - \frac{d\bar u}{\bar u})\,dt_1$$
so
$$
J=\frac1{8\pi^2}\lim_{\epsilon\to0_+}\int_{\cf_2(H^3)}p^*(H_{\epsilon\ell_1}-H_{\epsilon\ell_2})
\frac{dz\,du}{u^2}\,\frac{d\bar u}{\bar u}\,dt_1\,p_2^*\alpha
$$
Writing $\alpha$ as $\alpha=f\,dz\,d\bar z$ (we can again ignore the vertical component of $\alpha$) we then get
\begin{align*}
J&=\frac1{8\pi^2}\lim_{\epsilon\to0_+}\int_{\cf_2(H^3)}p^*(H_{\epsilon\ell_1}-H_{\epsilon\ell_2})
\frac{dz\,du}{u^2}\,\frac{d\bar u}{\bar u}\,dt_1\,f\,u\,dt_2\,d\bar z\\
&=\frac1{8\pi^2}\lim_{\epsilon\to0_+}\int_{\cf_2(H^3)}p^*(H_{\epsilon\ell_1}-H_{\epsilon\ell_2})
\frac{du\,d\bar u}{|u|^2}\,dt_1\,dt_2\,\alpha=-\frac1{4\pi i} \int_\C\log(\ell_1/\ell_2)\,\alpha.
\end{align*}
The prefactor $1/4\pi$, as compared to the prefactor $1/2\pi$ in $I$, is responsible for the coefficients $1/2$ in  \eqref{ggric}.

\subsection{Diagrams with at least 3 vertices converge}
Let us now consider a general 1-loop diagram of length $n$ ($n=5$ on the picture)
$$
\begin{tikzpicture}
\draw (0:1cm)node[anch,label=0:$\alpha_1$]{}--(72:1cm)node[anch,label=72:$\alpha_2$]{}--(144:1cm)node[anch,label=144:$\alpha_3$]{}--(-144:1cm)node[anch,label=-144:$\alpha_4$]{}--(-72:1cm)node[anch,label=-72:$\alpha_5$]{}--cycle;
%[label=60:$x$]
\end{tikzpicture}
$$
where on each edge we put one of the 2-forms $P_0$, $\bar P_0$, $P_1$, or $P_1^{op}$,  on each vertex a compactly supported form $\alpha_i\in\Omega(H^3)$, and finally integrate over $\cf_n(H^3)$. Notice that the total degree of $\alpha_i$'s must be $n$, as we need to integrate a $3n$-form.

Let us first remove a tubular neighbourhood of the diagonal $\C\subset H^3\subset_\text{diag}(H^3)^n$ from $\cf_n(H^3)$. To be specific, we fix $\epsilon>0$ and remove the configurations where all the $n$ points $q_1,\dots,q_n\in H^3$ satisfy $d(q_i,q_0)<\epsilon$ for some $q_0\in\C$ (here $d$ is the euclidean distance). Then the integral, which we will denote by $I_\epsilon$, converges (because there are ``no divergent subdiagrams'' of our diagram).

Now we want to see that $\lim_{\epsilon\to0}I_\epsilon$ exists if $n\geq3$. For that we use the $\epsilon\to0$ behaviour of $\epsilon\frac d{d\epsilon}I_\epsilon$:
$$\epsilon\frac d{d\epsilon}I_\epsilon=O(\epsilon^{n-2}).$$
This behaviour follows from a simple scaling argument: the propagators are scale invariant, and if we locally approximate $\alpha_i$'s by constant forms, they scale with the $n$-th power (since their total degree is $n$; the exponent shift $-2$ in $\epsilon^{n-2}$ comes from scaling along $\C$). From this it follows that if $n\geq3$ then $\lim_{\epsilon\to0}I_\epsilon$ indeed exists.



\begin{thebibliography}{99}
\bibitem{AKSZ} AKSZ
\bibitem{AS} Axelrod Singer
\bibitem{CM} Cattaneo Mnev
\bibitem{CSW} Coimbra Strickland-Constable Waldrum
\bibitem{G} Garcia-Fernandes
\bibitem{KSa} Kaputin Saulina
\bibitem{KSe} Klimƒç√≠k ≈†evera
\bibitem{K} Kontsevich CS
\bibitem{K2} Kontsevich DQ
\bibitem{PSV} Pulmann ≈†evera Valach
\bibitem{SST} Siampos Sfetsos Thompson 
\bibitem{S} ≈†evera CS
\bibitem{SV} ≈†evera Valach
\bibitem{SV} ≈†evera Valach II
\bibitem{W} Witten CS


\end{thebibliography}

\end{document}
